//-------------
    //- PIE CHART -
    //-------------
    // Get context with jQuery - using jQuery's .get() method.
    var pieChartCanvasSexo = $('#pieChartSexo').get(0).getContext('2d')
    var pieChartSexo       = new Chart(pieChartCanvasSexo)
    var PieDataSexo        = []
    var pieOptionsSexo     = {
      //Boolean - Whether we should show a stroke on each segment
      segmentShowStroke    : true,
      //String - The colour of each segment stroke
      segmentStrokeColor   : '#fff',
      //Number - The width of each segment stroke
      segmentStrokeWidth   : 2,
      //Number - The percentage of the chart that we cut out of the middle
      percentageInnerCutout: 50, // This is 0 for Pie charts
      //Number - Amount of animation steps
      animationSteps       : 100,
      //String - Animation easing effect
      animationEasing      : 'easeOutBounce',
      //Boolean - Whether we animate the rotation of the Doughnut
      animateRotate        : true,
      //Boolean - Whether we animate scaling the Doughnut from the centre
      animateScale         : false,
      //Boolean - whether to make the chart responsive to window resizing
      responsive           : true,
      // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
      maintainAspectRatio  : true,
      //String - A legend template
      legendTemplate       : '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'
    }
    //Create pie or douhnut chart
    // You can switch between pie and douhnut using the method below.

//-------------
    //- PIE CHART -
    //-------------
    // Get context with jQuery - using jQuery's .get() method.
    var pieChartCanvasVisitantes = $('#pieChartVisitantes').get(0).getContext('2d')
    var pieChartVisitantes       = new Chart(pieChartCanvasVisitantes)
    var PieDataVisitantes        = []
    var pieOptionsVisitantes     = {
      //Boolean - Whether we should show a stroke on each segment
      segmentShowStroke    : true,
      //String - The colour of each segment stroke
      segmentStrokeColor   : '#fff',
      //Number - The width of each segment stroke
      segmentStrokeWidth   : 2,
      //Number - The percentage of the chart that we cut out of the middle
      percentageInnerCutout: 50, // This is 0 for Pie charts
      //Number - Amount of animation steps
      animationSteps       : 100,
      //String - Animation easing effect
      animationEasing      : 'easeOutBounce',
      //Boolean - Whether we animate the rotation of the Doughnut
      animateRotate        : true,
      //Boolean - Whether we animate scaling the Doughnut from the centre
      animateScale         : false,
      //Boolean - whether to make the chart responsive to window resizing
      responsive           : true,
      // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
      maintainAspectRatio  : true,
      //String - A legend template
      legendTemplate       : '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'
    }
    //Create pie or douhnut chart
    // You can switch between pie and douhnut using the method below.


//-------------
    //- PIE CHART -
    //-------------
    // Get context with jQuery - using jQuery's .get() method.
    var pieChartCanvasDispositivo = $('#pieChartDispositivo').get(0).getContext('2d')
    var pieChartDispositivo      = new Chart(pieChartCanvasDispositivo)
    var PieDataDispositivo        = []
    var pieOptionsDispositivo     = {
      //Boolean - Whether we should show a stroke on each segment
      segmentShowStroke    : true,
      //String - The colour of each segment stroke
      segmentStrokeColor   : '#fff',
      //Number - The width of each segment stroke
      segmentStrokeWidth   : 2,
      //Number - The percentage of the chart that we cut out of the middle
      percentageInnerCutout: 50, // This is 0 for Pie charts
      //Number - Amount of animation steps
      animationSteps       : 100,
      //String - Animation easing effect
      animationEasing      : 'easeOutBounce',
      //Boolean - Whether we animate the rotation of the Doughnut
      animateRotate        : true,
      //Boolean - Whether we animate scaling the Doughnut from the centre
      animateScale         : false,
      //Boolean - whether to make the chart responsive to window resizing
      responsive           : true,
      // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
      maintainAspectRatio  : true,
      //String - A legend template
      legendTemplate       : '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'
    }
    //Create pie or douhnut chart
    // You can switch between pie and douhnut using the method below.

//-------------
    //- PIE CHART -
    //-------------
    // Get context with jQuery - using jQuery's .get() method.
    var pieChartCanvasBrowser = $('#pieChartBrowser').get(0).getContext('2d')
    var pieChartBrowser       = new Chart(pieChartCanvasBrowser)
    var PieDataBrowser        = []
    var pieOptionsBrowser     = {
      //Boolean - Whether we should show a stroke on each segment
      segmentShowStroke    : true,
      //String - The colour of each segment stroke
      segmentStrokeColor   : '#fff',
      //Number - The width of each segment stroke
      segmentStrokeWidth   : 2,
      //Number - The percentage of the chart that we cut out of the middle
      percentageInnerCutout: 50, // This is 0 for Pie charts
      //Number - Amount of animation steps
      animationSteps       : 100,
      //String - Animation easing effect
      animationEasing      : 'easeOutBounce',
      //Boolean - Whether we animate the rotation of the Doughnut
      animateRotate        : true,
      //Boolean - Whether we animate scaling the Doughnut from the centre
      animateScale         : false,
      //Boolean - whether to make the chart responsive to window resizing
      responsive           : true,
      // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
      maintainAspectRatio  : true,
      //String - A legend template
      legendTemplate       : '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'
    }
    //Create pie or douhnut chart
    // You can switch between pie and douhnut using the method below.
    

    

window.onload = function () {


    $.ajax({				
      url: CI_ROOT +'RelatoriosControllerAnalytics/getDispositivosAnalytics',
      dataType: 'json',
      method: "POST",   
    })
    .done(function( retorno ) {

      $.each(retorno.reports[0].data.rows, function (key, valor) {			       
        var obj= new Object();
          obj.value = valor.metrics[0].values[0];
          if(valor.dimensions[0]=='mobile'){
            obj.color = '#f56954';
            obj.highlight = '#f56954';          
            $('#visaoGeralDispositivo').append('<li><a href="#"><i class="fa fa-mobile" aria-hidden="true"></i>  '+valor.dimensions[0]+'<span class="pull-right badge bg-red">'+obj.value+'</span></a></li>');
          }
          if(valor.dimensions[0]=='desktop'){
            obj.color = '#00c0ef';
            obj.highlight = '#00c0ef';
            $('#visaoGeralDispositivo').append('<li><a href="#"><i class="fa fa-desktop" aria-hidden="true"></i>  '+valor.dimensions[0]+'<span class="pull-right badge bg-blue">'+obj.value+'</span></a></li>');
          }   
          if(valor.dimensions[0]=='tablet'){
            obj.color = '#f39c12';
            obj.highlight = '#f39c12'; 
            $('#visaoGeralDispositivo').append('<li><a href="#"><i class="fa fa-tablet" aria-hidden="true"></i>  '+valor.dimensions[0]+'<span class="pull-right badge bg-yellow">'+obj.value+'</span></a></li>');
          }  
          obj.label = valor.dimensions[0];             
          PieDataDispositivo.push(obj);     
          
          

          
        
      });
      pieChartDispositivo.Doughnut(PieDataDispositivo, pieOptionsDispositivo);

      
       
    })
    .fail(function( jqXHR, textStatus ) {
      console.log("Request failed: " + textStatus);
    });

   
    
    $.ajax({				
      url: CI_ROOT +'RelatoriosControllerAnalytics/getInfoDemografAnalytics',
      dataType: 'json',
      method: "POST",   
    })
    .done(function( retorno ) {
      //console.log(retorno);

      $.each(retorno.reports[0].data.rows, function (key, valor) {			 
        /*console.log(key);
        console.log(valor.dimensions[0]);
        console.log(valor.metrics[0].values[0]);*/
        
          var obj= new Object();
          obj.value = valor.metrics[0].values[0];
          if(valor.dimensions[0]=='female'){
            obj.color = '#f56954';
            obj.highlight = '#f56954'; 
            obj.label = 'Feminino'; 
            $('#densidadeDemografica').append('<li><a href="#"><i class="fa fa-female" aria-hidden="true"></i> '+valor.dimensions[0]+'<span class="pull-right badge bg-blue">'+obj.value+'</span></a></li>');           
          }
          if(valor.dimensions[0]=='male'){
            obj.color = '#00c0ef';
            obj.highlight = '#00c0ef'; 
            obj.label = 'Masculino';
            $('#densidadeDemografica').append('<li><a href="#"><i class="fa fa-male" aria-hidden="true"></i> '+valor.dimensions[0]+'<span class="pull-right badge bg-red">'+obj.value+'</span></a></li>');
          }                  
          PieDataSexo.push(obj);
         
        
      });
      pieChartSexo.Doughnut(PieDataSexo, pieOptionsSexo);
       

    })
    .fail(function( jqXHR, textStatus ) {
      console.log("Request failed: " + textStatus);
    });

     $.ajax({				
      url: CI_ROOT +'RelatoriosControllerAnalytics/getVisitantesAnalytics',
      dataType: 'json',
      method: "POST",   
    })
    .done(function( retorno ) {
      //console.log(retorno);

      $.each(retorno, function (key, valor) {			 
        /*console.log(key);
        console.log(valor.dimensions[0]);
        console.log(valor.metrics[0].values[0]);*/
        
          var obj= new Object();
          obj.value = valor.metrics[0].values[0];
          if(valor.dimensions[0]=='New Visitor'){
            obj.color = '#00a65a';
            obj.highlight = '#00a65a'; 
            obj.label = 'Novos Visitantes' ;     
            $('#novosRecorrentes').append('<li><a href="#"> '+valor.dimensions[0]+'<span class="pull-right badge bg-green">'+obj.value+'</span></a></li>');                 
          }
          if(valor.dimensions[0]=='Returning Visitor'){
            obj.color = '#f39c12';
            obj.highlight = '#f39c12'; 
            obj.label = 'Visitantes Recorrentes';
            $('#novosRecorrentes').append('<li><a href="#"> '+valor.dimensions[0]+'<span class="pull-right badge bg-yellow">'+obj.value+'</span></a></li>');
          }                  
          PieDataVisitantes.push(obj);
         
        
      });
      pieChartVisitantes.Doughnut(PieDataVisitantes, pieOptionsVisitantes);
       

    })
    .fail(function( jqXHR, textStatus ) {
      console.log("Request failed: " + textStatus);
    });

    /// Browser

    //console.log('verificando google analytics Browser...');
    $.ajax({				
      url: CI_ROOT +'RelatoriosControllerAnalytics/getBrowserAnalytics',
      dataType: 'json',
      method: "POST",   
    })
    .done(function( retorno ) {
      //console.log(retorno);

      $.each(retorno.reports[0].data.rows, function (key, valor) {			 
        /*console.log(key);
        console.log(valor.dimensions[0]);
        console.log(valor.metrics[0].values[0]);*/
        if(valor.dimensions[0]=='Chrome' || valor.dimensions[0]=='Firefox' || 
         valor.dimensions[0]=='Safari' || valor.dimensions[0]=='Internet Explorer' ||
         valor.dimensions[0]=='Edge' || valor.dimensions[0]=='Opera' ){
          var obj= new Object();
          obj.value = valor.metrics[0].values[0];
          if(valor.dimensions[0]=='Chrome'){
            obj.color = '#f56954';
            obj.highlight = '#f56954';    
            $('#browserAcesosFooter').append('<li><a href="#"><i class="fa fa-chrome"></i> '+valor.dimensions[0]+'<span class="pull-right badge bg-red">'+obj.value+'</span></a></li>');         
          }
          if(valor.dimensions[0]=='Firefox'){
            obj.color = '#f39c12';
            obj.highlight = '#f39c12'; 
            $('#browserAcesosFooter').append('<li><a href="#"><i class="fa fa-firefox"></i> '+valor.dimensions[0]+'<span class="pull-right badge bg-yellow">'+obj.value+'</span></a></li>');
          }
          if(valor.dimensions[0]=='Safari'){ 
            obj.color = '#00c0ef';
            obj.highlight = '#00c0ef'; 
            $('#browserAcesosFooter').append('<li><a href="#"><i class="fa fa-safari"></i> '+valor.dimensions[0]+'<span class="pull-right badge bg-blue">'+obj.value+'</span></a></li>');
          }
          if(valor.dimensions[0]=='Internet Explorer'){ 
            obj.color = '#00a65a';
            obj.highlight = '#00a65a'; 
            $('#browserAcesosFooter').append('<li><a href="#"><i class="fa fa-internet-explorer"></i> '+valor.dimensions[0]+'<span class="pull-right badge bg-green">'+obj.value+'</span></a></li>');
          }
          if(valor.dimensions[0]=='Edge'){
            obj.color = '#d2d6de';
            obj.highlight = '#d2d6de'; 
            $('#browserAcesosFooter').append('<li><a href="#"><i class="fa fa-edge"></i> '+valor.dimensions[0]+'<span class="pull-right badge bg-gray">'+obj.value+'</span></a></li>');
          }
          if(valor.dimensions[0]=='Opera'){
            obj.color = '#3c8dbc';
            obj.highlight = '#3c8dbc'; 
            $('#browserAcesosFooter').append('<li><a href="#"><i class="fa fa-opera"></i> '+valor.dimensions[0]+'<span class="pull-right badge bg-info">'+obj.value+'</span></a></li>');
          }
        
          obj.label = valor.dimensions[0];
          PieDataBrowser.push(obj);
         // $('#browserAcesosFooter').append('<li><a href="#">'+valor.dimensions[0]+'<span class="pull-right">'+valor.metrics[0].values[0]+'</span></a></li>');
                    
        }
        
        
      });   
      pieChartBrowser.Doughnut(PieDataBrowser, pieOptionsBrowser);       

    })
    .fail(function( jqXHR, textStatus ) {
      console.log("Request failed: " + textStatus);
    });


   

};

$('#reservation').daterangepicker({
  locale: {
    format: 'DD/MM/YYYY'
  },      
  ranges   : {
      'Hoje'       : [moment(), moment()],
      'Ontem'   : [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
      'Últimos 7 dias' : [moment().subtract(6, 'days'), moment()],
      'Últimos 30 dias': [moment().subtract(29, 'days'), moment()],
      'Este Mês'  : [moment().startOf('month'), moment().endOf('month')],
      'Mês Passado'  : [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
  },
  //startDate: moment().subtract(29, 'days'),
  //endDate  : moment(),
  alwaysShowCalendars: true,
  opens: "right",
  function (start, end) {
    //$('#daterange-btn span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'))
  }
});